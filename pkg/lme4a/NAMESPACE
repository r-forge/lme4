useDynLib(lme4a, .registration=TRUE)

import("grid")
import("lattice")
import("splines")
importFrom("graphics", plot)
importFrom("nlme", BIC, fixef, ranef, VarCorr)
importFrom("stats", AIC,  coef, confint, logLik, profile, vcov,
           anova, deviance, formula, model.frame, model.matrix,
           nlminb, optimize, predict, resid, residuals, simulate,
           terms)
importFrom("minqa", bobyqa)

importClassesFrom("Matrix",
                  CHMfactor,
                  CHMsimpl,
                  CHMsuper,
                  Cholesky,
                  Matrix,
                  corMatrix,
                  dCHMsimpl,
                  dCHMsuper,
                  dMatrix,
                  ddiMatrix,
                  dgCMatrix,
                  dgeMatrix,
                  dpoMatrix,
                  dsCMatrix,
                  nCHMsimpl,
                  nCHMsuper,
                  symmetricMatrix)

importMethodsFrom("Matrix",
                  "%*%",
                  Cholesky,
                  as.vector,
                  chol,
                  chol2inv,
                  coerce,
                  crossprod,
                  determinant,
                  diag,
                  diag,
                  solve,
                  summary,
                  t,
                  tcrossprod,
                  update)

#exportPattern("^[^\\.]")  # for debugging

export(VarCorr, copyMerenv, devcomp, env, getL,
       glmer, glmer2, lmList, lmer, lmer1, lmer2, nlmer,
       sigma, findbars, nobars, subbars, isNested)

exportClasses(lmList,
	      ## export all super classes of e.g., "lmerenv",
	      ## so users can query the class system :
	      optenv, merenv, merenvtrms, lmerenv, glmerenv,
              mer, lmer, glmer,
              reModule, rwReMod, feModule, deFeMod, spFeMod,
              reTrms, rwReTrms,
              lmerDeFeMod, lmerSpFeMod, rwDeFeMod, rwSpFeMod,
              merResp, lmerResp, rwResp, glmerResp, nlmerResp, nglmerResp,
              lmerMod, lmerDe, lmerSp
              )

exportMethods(VarCorr, anova, bobyqa, coef, coerce, confint, deviance,
              devcomp,
## see ./ToDo -- '*merMod' classes currently do not store the model.frame, terms:
##            model.frame, terms,
              fixef, formula, getL,
              logLik, model.matrix, nlminb,
              optimize, plot, print, profile, ranef,
              show, sigma, summary, update, vcov)

S3method(plot, coef.mer)
S3method(dotplot, coef.mer)
S3method(plot, ranef.mer)
S3method(qqmath, ranef.mer)
S3method(dotplot, ranef.mer)
## profile() related:
S3method(xyplot, thpr)
S3method(confint, thpr)
S3method(splom, thpr)
S3method(log, thpr)
